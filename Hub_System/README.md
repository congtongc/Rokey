# Hub System

### 6축 협동 로봇을 활용한 물류 창고 허브 시스템

## 구현 방법

### - 클래스와 함수의 캡슐화 작업을 통해 보안성, 재사용성을 높여 코드의 가시성을 높였다.
### - 두산 패키지를 사용하여 DRL을 파이썬 함수로 정리한 라이브러리를 사용하여 구현하였다.

## 구성
### 🔹 `manage_hub`: 물류 상자 분류 및 적재

로봇팔에 장착된 그리퍼가 물류 상자를 파지하면서 크기를 측정하고, 아래 기준에 따라 자동으로 적재합니다.

#### 📦 상자 분류 및 적재 기준

| 상자 크기 | 적재 위치      | 최대 적재 높이 | 비고                         |
|-----------|----------------|----------------|------------------------------|
| 2x3       | 허브 앞쪽      | 3층            | 적재 공간 부족 시 오버플로우 |
| 2x2       | 허브 안쪽      | 3층            | 적재 공간 부족 시 오버플로우 |
| 2x1       | 불량품 구역    | 제한 없음     | 공간 고르게 분배, 높이 초과 시 알림 |

#### ⚠️ 오버플로우 처리

- 허브 내 동일 크기 상자의 적재 공간이 가득 찼을 경우, 해당 상자를 **오버플로우 구역**에 임시 적재합니다.
- 오버플로우 구역은 **최대 4개 상자까지** 수용할 수 있습니다.
- 추후 공간이 확보되면 본래 위치로 재배치됩니다.

#### 🚫 예외 상황 처리

- **그리퍼 위치에 상자가 감지되지 않음**
  - → 작업 중지 및 로봇팔 초기 위치로 복귀
- **허브와 오버플로우 모두 가득참**
  - → 작업 중지 및 초기 위치로 복귀

---

### 🔹 `input_hub`: 상자 출고 제어 시스템

허브 내 적재된 상자들을 **3층부터 1층 순으로 출고**합니다.  
로봇팔은 상자를 감지하고 비틀어 잡은 후 지정된 위치로 안전하게 이동시킵니다.

#### 🚚 출고 절차

1. 로봇팔이 **3층부터 순차 접근**
2. 물체 감지 후 **Rz 축 회전값을 증가시켜 비틀어 파지**
3. **출고 위치로 안전하게 이동**
4. 초기 위치로 복귀하여 다음 작업 대기
5. 위 절차 반복

---

## ✅ 기능 요약

- 상자 크기 기반 자동 분류 및 적재
- 불량품 자동 분리 및 적재량 모니터링
- 적재 공간 초과 시 오버플로우 구역 활용
- 로봇팔 출고 시 비틀어 들기 (Rz 회전)
- 작업 종료 조건 명확히 설정

---

## 설명 파일(pdf)
[Hub_System.pdf](https://github.com/user-attachments/files/21282946/Hub_System.pdf)

## 실행 영상
https://github.com/user-attachments/assets/d73f213e-22ab-4af8-a664-39cbdd6ea24c
